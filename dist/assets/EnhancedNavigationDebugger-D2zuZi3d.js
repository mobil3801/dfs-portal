import{j as e}from"./radix-ui-Crli8-Dx.js";import{r as s}from"./react-core-CKNU0hQt.js";import{u as a,f as r,C as i,g as n,h as l,l as c,i as d,A as t,m as o,p as m,q as h,r as x,s as u,T as j,a as g,b as f,c as p,d as N,e as v,B as b,S as y}from"./index-CNwujOOT.js";import{a as w}from"./routing-DcURAnU1.js";import{H as R,P as q,F as D,i as A,j as C,k as S,l as z,m as P,D as I,S as E,d as H,v as O,w as T,R as L,e as M,av as k,q as V,E as B}from"./utilities-BH0DC7Sl.js";const F=[{name:"Dashboard",href:"/dashboard",icon:R,requiredRole:null},{name:"Products",href:"/products",icon:q,requiredRole:null},{name:"Sales",href:"/sales",icon:D,requiredRole:null},{name:"Delivery",href:"/delivery",icon:A,requiredRole:null},{name:"Employees",href:"/employees",icon:C,requiredRole:null},{name:"Vendors",href:"/vendors",icon:S,requiredRole:null},{name:"Orders",href:"/orders",icon:z,requiredRole:null},{name:"Licenses",href:"/licenses",icon:P,requiredRole:null},{name:"Salary",href:"/salary",icon:I,requiredRole:null},{name:"Settings",href:"/settings",icon:E,requiredRole:null},{name:"Admin",href:"/admin",icon:H,requiredRole:"admin"}],W=[{name:"Dashboard",href:"/dashboard",icon:R,requiredRole:null},{name:"Products",href:"/products",icon:q,requiredRole:null},{name:"Sales",href:"/sales",icon:D,requiredRole:null},{name:"Delivery",href:"/delivery",icon:A,requiredRole:null},{name:"Employees",href:"/employees",icon:C,requiredRole:"manager"},{name:"Vendors",href:"/vendors",icon:S,requiredRole:"manager"},{name:"Orders",href:"/orders",icon:q,requiredRole:"manager"},{name:"Licenses",href:"/licenses",icon:P,requiredRole:"manager"},{name:"Salary",href:"/salary",icon:I,requiredRole:"manager"},{name:"Settings",href:"/settings",icon:E,requiredRole:null},{name:"Admin",href:"/admin",icon:H,requiredRole:"admin"}],U=()=>{const{user:R,userProfile:C,isAuthenticated:S,isLoading:z,isInitialized:P,isAdmin:I,isManager:E,authError:H,refreshUserData:U,hasPermission:Y}=a(),G=w(),[J,K]=s.useState(!1),[Q,X]=s.useState(!1),[Z,$]=s.useState(!0),_=e=>!e||!!S&&("admin"===e.toLowerCase()?I():"manager"!==e.toLowerCase()||E()),ee=F.filter(e=>_(e.requiredRole));F.filter(e=>!_(e.requiredRole)),W.filter(e=>_(e.requiredRole));const se=F.map(e=>{const s=W.find(s=>s.href===e.href);if(!s)return null;const a=e.requiredRole!==s.requiredRole,r=_(e.requiredRole),i=_(s.requiredRole);return a?{name:e.name,href:e.href,topNavRole:e.requiredRole,debuggerRole:s.requiredRole,topNavAccess:r,debuggerAccess:i,accessDiffers:r!==i}:null}).filter(Boolean),ae=G.pathname;F.find(e=>ae.startsWith(e.href));const re={authInitialized:P,authLoading:z,userAuthenticated:S,hasProfile:!!C,hasAccessibleItems:ee.length>0,hasDiscrepancies:se.length>0,overallHealth:P&&!z&&S&&!!R&&ee.length>0&&0===se.length};return s.useEffect(()=>{se.length>0&&!1===re.overallHealth&&console.warn("Navigation configuration discrepancies detected:",se.length)},[se.length,re.overallHealth]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Enhanced Navigation Debugger"}),e.jsx("p",{className:"text-gray-600",children:"Advanced diagnostics for navigation issues"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>X(!Q),children:[Q?e.jsx(O,{className:"h-4 w-4 mr-2"}):e.jsx(T,{className:"h-4 w-4 mr-2"}),Q?"Hide":"Show"," Details"]}),e.jsxs(r,{onClick:async()=>{K(!0);try{await U()}catch(e){console.error("Failed to refresh user data:",e)}finally{K(!1)}},disabled:J,variant:"outline",size:"sm",children:[e.jsx(L,{className:"h-4 w-4 mr-2 "+(J?"animate-spin":"")}),"Refresh Data"]})]})]}),e.jsxs(i,{children:[e.jsxs(n,{children:[e.jsxs(l,{className:"flex items-center gap-2",children:[re.overallHealth?e.jsx(M,{className:"h-5 w-5 text-green-500"}):e.jsx(k,{className:"h-5 w-5 text-red-500"}),"Enhanced Navigation Health"]}),e.jsx(c,{children:"Comprehensive navigation system status"})]}),e.jsx(d,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full "+(re.authInitialized?"bg-green-500":"bg-red-500")}),e.jsx("span",{className:"text-sm",children:"Auth Initialized"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full "+(re.authLoading?"bg-yellow-500":"bg-green-500")}),e.jsx("span",{className:"text-sm",children:"Not Loading"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full "+(re.userAuthenticated?"bg-green-500":"bg-red-500")}),e.jsx("span",{className:"text-sm",children:"Authenticated"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full "+(re.hasAccessibleItems?"bg-green-500":"bg-red-500")}),e.jsx("span",{className:"text-sm",children:"Has Menu Items"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full "+(re.hasDiscrepancies?"bg-red-500":"bg-green-500")}),e.jsx("span",{className:"text-sm",children:"No Discrepancies"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full "+(re.hasProfile?"bg-green-500":"bg-red-500")}),e.jsx("span",{className:"text-sm",children:"Has User Profile"})]})]})})]}),se.length>0&&Z&&e.jsxs(t,{variant:"destructive",children:[e.jsx(V,{className:"h-4 w-4"}),e.jsxs(o,{children:[e.jsxs("div",{className:"font-medium",children:["Found ",se.length," role discrepancies between navigation configurations"]}),e.jsx("p",{className:"text-sm mt-1",children:"There are differences in required roles between TopNavigation and NavigationDebugger components. This can cause inconsistent navigation behavior."}),e.jsx(r,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>$(!1),children:"Dismiss"})]})]}),e.jsxs(m,{defaultValue:"discrepancies",className:"w-full",children:[e.jsxs(h,{className:"grid w-full grid-cols-3",children:[e.jsx(x,{value:"discrepancies",children:"Discrepancies"}),e.jsx(x,{value:"permissions",children:"Permission Tests"}),e.jsx(x,{value:"overflow",children:"Overflow Analysis"})]}),e.jsx(u,{value:"discrepancies",className:"space-y-4",children:e.jsxs(i,{children:[e.jsxs(n,{children:[e.jsx(l,{children:"Navigation Configuration Discrepancies"}),e.jsx(c,{children:"Differences between TopNavigation and NavigationDebugger components"})]}),e.jsx(d,{children:0===se.length?e.jsxs("div",{className:"bg-green-50 p-4 rounded-md text-green-700",children:[e.jsx(M,{className:"h-5 w-5 inline-block mr-2"}),"No discrepancies found. Navigation configurations are consistent."]}):e.jsxs(j,{children:[e.jsx(g,{children:e.jsxs(f,{children:[e.jsx(p,{children:"Item"}),e.jsx(p,{children:"TopNav Role"}),e.jsx(p,{children:"Debugger Role"}),e.jsx(p,{children:"Access Differs"})]})}),e.jsx(N,{children:se.map((s,a)=>e.jsxs(f,{className:s.accessDiffers?"bg-red-50":"",children:[e.jsx(v,{className:"font-medium",children:s.name}),e.jsx(v,{children:s.topNavRole||"null"}),e.jsx(v,{children:s.debuggerRole||"null"}),e.jsx(v,{children:s.accessDiffers?e.jsx(b,{variant:"destructive",children:"Yes"}):e.jsx(b,{variant:"outline",children:"No"})})]},a))})]})})]})}),e.jsx(u,{value:"permissions",className:"space-y-4",children:e.jsxs(i,{children:[e.jsxs(n,{children:[e.jsx(l,{children:"Permission Test Matrix"}),e.jsx(c,{children:"Test permission checks for different actions and resources"})]}),e.jsx(d,{children:e.jsxs(j,{children:[e.jsx(g,{children:e.jsxs(f,{children:[e.jsx(p,{children:"Resource"}),e.jsx(p,{children:"View"}),e.jsx(p,{children:"Create"}),e.jsx(p,{children:"Edit"}),e.jsx(p,{children:"Delete"})]})}),e.jsx(N,{children:["products","employees","sales","vendors","orders"].map(s=>e.jsxs(f,{children:[e.jsx(v,{className:"font-medium capitalize",children:s}),["view","create","edit","delete"].map(a=>e.jsx(v,{children:Y(a,s)?e.jsxs(b,{variant:"default",className:"bg-green-500",children:[e.jsx(M,{className:"h-3 w-3 mr-1"})," Yes"]}):e.jsxs(b,{variant:"outline",className:"text-red-500",children:[e.jsx(k,{className:"h-3 w-3 mr-1"})," No"]})},a))]},s))})]})})]})}),e.jsx(u,{value:"overflow",className:"space-y-4",children:e.jsxs(i,{children:[e.jsxs(n,{children:[e.jsx(l,{children:"Overflow Navigation Analysis"}),e.jsx(c,{children:"Analyze how navigation items are distributed between visible and overflow menus"})]}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-gray-50 rounded-md",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(q,{className:"h-5 w-5 text-gray-500"}),e.jsx("span",{children:"Products"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(D,{className:"h-5 w-5 text-gray-500"}),e.jsx("span",{children:"Sales"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{className:"h-5 w-5 text-gray-500"}),e.jsx("span",{children:"Delivery"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(B,{className:"h-5 w-5 text-gray-500"}),e.jsx("span",{children:"More"})]})]}),e.jsx(y,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Overflow Calculation Factors"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded",children:[e.jsx("h4",{className:"font-medium",children:"Container Width"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Available space for navigation items"}),e.jsx("p",{className:"text-lg font-medium mt-1",children:"Varies by screen size"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded",children:[e.jsx("h4",{className:"font-medium",children:"Item Widths"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Space needed for each navigation item"}),e.jsx("p",{className:"text-lg font-medium mt-1",children:"Calculated dynamically"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded",children:[e.jsx("h4",{className:"font-medium",children:"More Button Width"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Space reserved for overflow menu button"}),e.jsx("p",{className:"text-lg font-medium mt-1",children:"~100px"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded",children:[e.jsx("h4",{className:"font-medium",children:"Padding"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Extra space reserved in container"}),e.jsx("p",{className:"text-lg font-medium mt-1",children:"~32px"})]})]})]}),e.jsx(y,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Common Overflow Issues"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"p-2 bg-red-50 rounded text-red-700",children:[e.jsx("strong",{children:"Calculation Timing:"})," Overflow calculation happens before DOM is fully rendered"]}),e.jsxs("li",{className:"p-2 bg-red-50 rounded text-red-700",children:[e.jsx("strong",{children:"ResizeObserver Issues:"})," Browser compatibility problems with ResizeObserver"]}),e.jsxs("li",{className:"p-2 bg-red-50 rounded text-red-700",children:[e.jsx("strong",{children:"Race Conditions:"})," Multiple resize events causing calculation conflicts"]}),e.jsxs("li",{className:"p-2 bg-red-50 rounded text-red-700",children:[e.jsx("strong",{children:"Hidden Container Problems:"})," Issues with measuring hidden items accurately"]})]})]})]})]})})]})]})};export{U as E};
