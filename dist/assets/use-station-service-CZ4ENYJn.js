import{r as s}from"./react-core-CKNU0hQt.js";import{s as e}from"./stationService-CEciqnCB.js";import{u as t}from"./index-DQt9P8ND.js";const a=(a=!0)=>{const{userProfile:o}=t(),[n,i]=s.useState([]),[r,l]=s.useState(!0),[c,u]=s.useState(null),S=s.useCallback(async()=>{try{l(!0),u(null);const s=await e.getStationOptions(a,o?.role,o?.permissions);i(s)}catch(s){const e=s instanceof Error?s.message:"Failed to load station options";u(e),i([])}finally{l(!1)}},[a,o?.role,o?.permissions]);s.useEffect(()=>{S()},[S]);const m=s.useCallback(s=>e.getStationColor(s),[]),p=s.useCallback(()=>{const s=o?.role,e=o?.permissions;return"Administrator"===s||"Management"===s||"Manager"===s||e?.includes("view_all_stations")||!1},[o?.role,o?.permissions]),A=s.useCallback(async()=>{try{return await e.getUserAccessibleStations(o?.role,o?.permissions,o?.stationAccess)}catch(s){return console.error("Error getting accessible stations:",s),[]}},[o?.role,o?.permissions,o?.stationAccess]);return{stationOptions:n,loading:r,error:c,getStationColor:m,canSelectAll:p(),getUserAccessibleStations:A,refetch:S}},o=a=>{const{userProfile:o}=t(),[n,i]=s.useState([]),[r,l]=s.useState(!0);s.useEffect(()=>{(async()=>{try{l(!0);const s=await e.getUserAccessibleStations(o?.role,o?.permissions,o?.stationAccess);i(s)}catch(s){console.error("Error loading accessible stations:",s),i([])}finally{l(!1)}})()},[o?.role,o?.permissions,o?.stationAccess]);const c=s.useCallback(()=>"ALL_STATIONS"===a||"ALL"===a?0===n.length?[{name:"station",op:"Equal",value:"__NO_ACCESS__"}]:1===n.length?[{name:"station",op:"Equal",value:n[0]}]:null:[{name:"station",op:"Equal",value:a}],[a,n]),u=a&&"ALL_STATIONS"!==a&&"ALL"!==a,S=s.useCallback(()=>n.map(s=>({name:"station",op:"Equal",value:s})),[n]);return{stationFilters:c(),shouldFilterByStation:u,isAllSelected:"ALL_STATIONS"===a||"ALL"===a,accessibleStations:n,accessibleStationsFilter:S(),loading:r}};export{a,o as u};
