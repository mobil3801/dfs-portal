import{j as e}from"./radix-ui-woSLwCdF.js";import{u as s,C as r,f as a,g as l,k as i,h as t,B as n,e as c}from"./index-CIZJQuMw.js";import{u as d}from"./routing-DcURAnU1.js";import{g as o,w as x,T as m,y as h,K as u,R as j,U as N}from"./utilities-DMEd7dY0.js";const g=({feature:g="this feature",requiredRole:p="Administrator",showBackButton:f=!0,className:b=""})=>{const v=d(),{user:y,userProfile:w,loading:R}=s(),k={hasUser:!!y,userEmail:y?.Email||"Not logged in",hasProfile:!!w,currentRole:w?.role||"No role",profileId:w?.ID||"No ID",isLoading:R};return e.jsx("div",{className:`flex items-center justify-center min-h-64 ${b}`,children:e.jsxs(r,{className:"max-w-lg w-full border-2 border-red-200 bg-red-50",children:[e.jsxs(a,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-4 bg-red-100 rounded-full",children:e.jsx(o,{className:"h-12 w-12 text-red-600"})})}),e.jsxs(l,{className:"text-red-800 flex items-center justify-center gap-2",children:[e.jsx(x,{className:"h-5 w-5"}),"Access Denied"]}),e.jsxs(i,{className:"text-red-700",children:["You don't have permission to access ",g]})]}),e.jsxs(t,{className:"text-center space-y-4",children:[e.jsxs("div",{className:"bg-red-100 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(m,{className:"h-5 w-5 text-red-600"}),e.jsx("span",{className:"font-semibold text-red-800",children:"Administrator Access Required"})]}),e.jsxs("p",{className:"text-sm text-red-700",children:["This feature requires ",p," privileges for security and compliance reasons."]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{variant:"destructive",className:"w-full py-2",children:["Current Role: ",w?.role||"No Role"]}),e.jsxs(n,{variant:"outline",className:"w-full py-2 border-red-300 text-red-700",children:["Required Role: ",p]})]}),e.jsxs("div",{className:"text-xs text-gray-600 bg-gray-50 p-3 rounded border space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(h,{className:"h-3 w-3"}),e.jsx("span",{className:"font-medium",children:"Debug Information:"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-1 text-left",children:[e.jsx("span",{children:"User:"}),e.jsx("span",{className:k.hasUser?"text-green-600":"text-red-600",children:k.hasUser?"✓ Logged in":"✗ Not logged in"}),e.jsx("span",{children:"Email:"}),e.jsx("span",{className:"truncate",children:k.userEmail}),e.jsx("span",{children:"Profile:"}),e.jsx("span",{className:k.hasProfile?"text-green-600":"text-red-600",children:k.hasProfile?"✓ Found":"✗ Missing"}),e.jsx("span",{children:"Role:"}),e.jsx("span",{className:"No role"!==k.currentRole?"text-blue-600":"text-red-600",children:k.currentRole}),e.jsx("span",{children:"Loading:"}),e.jsx("span",{className:k.isLoading?"text-yellow-600":"text-green-600",children:k.isLoading?"Yes":"No"})]})]}),e.jsxs("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded border border-red-200",children:[e.jsx("p",{className:"font-medium mb-1",children:"Need access?"}),e.jsxs("p",{children:["Contact your system administrator to request ",p," privileges."]}),!w&&e.jsx("p",{className:"mt-2 text-xs",children:"Note: Your user profile may not be set up correctly. Try refreshing the page."})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[f&&e.jsxs(c,{variant:"outline",onClick:()=>v(-1),className:"flex-1 border-red-300 text-red-700 hover:bg-red-100",children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Go Back"]}),e.jsxs(c,{variant:"outline",onClick:()=>{window.location.reload()},className:"flex-1 border-blue-300 text-blue-700 hover:bg-blue-100",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),!y&&e.jsx("div",{className:"pt-2",children:e.jsxs(c,{onClick:()=>v("/login"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Go to Login"]})})]})]})})};export{g as A};
