import{j as e}from"./radix-ui-BhRELLXi.js";import{r as s}from"./react-core-CKNU0hQt.js";import{n as t,C as a,j as l,i,f as r,B as n,u as c,k as o,t as d,g as m,h as x,l as h,I as u,T as p,a as j,b as y,c as b,d as g,e as v}from"./index-s81fdLZV.js";import{S as f,c as N,d as w,a as _,b as D}from"./select-CiDiYLaC.js";import{u as C,V as k}from"./use-keyboard-shortcuts-DcZvEkXs.js";import{a as O}from"./use-mobile-BQxxJ7Jh.js";import{P as I}from"./ProfilePicture-DcDrcXf5.js";import{x as E,F as A,w as S,$ as L,q as $,X as R,a4 as P,a0 as z,j as M,Q as B,V as F,W as U,O as Y,U as V,r as q,a5 as T}from"./utilities-DVevn_gw.js";import{d as K}from"./phoneFormatter-M0vagYYn.js";import{u as H}from"./routing-DcURAnU1.js";import{m as Q}from"./animations-Cc9qW4PM.js";import"./data-management-CF8GQrOz.js";import"./dialog-DoXR3LdX.js";import"./imageCompression-DvX-F3tO.js";const W=({file:c,fileId:o,fileName:d,documentName:m="Document",className:x="",onRemove:h,showRemoveButton:u=!0,disabled:p=!1,size:j="lg",aspectRatio:y="landscape",showDownload:b=!1,showFullscreen:g=!0,showInstantPreview:v=!0})=>{const[f,N]=s.useState(null),[w,_]=s.useState(!1),[D,C]=s.useState(!1),[k,O]=s.useState(!1),[I,M]=s.useState(v);t(),s.useEffect(()=>{if(c){const e=URL.createObjectURL(c);return N(e),O(c.type.startsWith("image/")),C(!1),_(!0),()=>{URL.revokeObjectURL(e)}}if(o){(async e=>{try{const s=await fetch(`https://api.ezsite.ai/file/${e}`);if(s.ok){const e=await s.blob();return URL.createObjectURL(e)}throw new Error(`Failed to fetch file: ${s.status}`)}catch(s){return console.error("Error fetching file:",s),null}})(o).then(e=>{e?(N(e),O(!0),C(!1),_(!0)):(C(!0),_(!1))})}else N(null),O(!1),C(!1),_(!1)},[c,o]),s.useEffect(()=>{M(v)},[v]);const B=()=>{f&&window.open(f,"_blank")},F=()=>{if(f){const e=document.createElement("a");e.href=f,e.download=d||"document",document.body.appendChild(e),e.click(),document.body.removeChild(e)}},U=()=>d||(c?c.name:m);return c||o?e.jsx(a,{className:l("overflow-hidden shadow-md hover:shadow-lg transition-shadow",x),children:e.jsxs(i,{className:"p-0",children:[e.jsxs("div",{className:l("relative w-full bg-gray-50 border-b",(()=>{switch(j){case"sm":return"h-24";case"md":return"h-32";case"lg":default:return"h-48";case"xl":return"h-80"}})(),(()=>{switch(y){case"square":return"aspect-square";case"landscape":default:return"aspect-[3/2]";case"auto":return""}})()),children:[w&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100",children:e.jsx(E,{className:"w-8 h-8 animate-spin text-gray-400"})}),f&&k&&!D&&I&&e.jsx("img",{src:f,alt:U(),className:l("w-full h-full object-contain hover:object-cover transition-all duration-300 cursor-pointer rounded-t-lg",w&&"opacity-0"),onLoad:()=>{_(!1),C(!1)},onError:()=>{_(!1),C(!0)},onClick:g?B:void 0}),!I&&!w&&e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 border-2 border-dashed border-blue-300 rounded-lg",children:e.jsxs("div",{className:"text-center p-6",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(A,{className:"w-16 h-16 text-blue-500 mx-auto mb-3 drop-shadow-sm"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx(S,{className:"w-3 h-3 text-white"})})]}),e.jsx("p",{className:"text-sm font-semibold text-blue-800 mb-1",children:"Document Preview"}),e.jsx("p",{className:"text-xs text-blue-600 mb-3",children:D?"Image preview unavailable":"Click to preview document"}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs(r,{type:"button",variant:"default",size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white shadow-md",onClick:()=>M(!0),children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Preview Document"]}),b&&e.jsxs(r,{type:"button",variant:"outline",size:"sm",className:"text-blue-600 border-blue-300 hover:bg-blue-50",onClick:F,children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Download"]})]})]})}),I&&(!k||D)&&!w&&e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 border-2 border-dashed border-gray-300 rounded-lg",children:e.jsxs("div",{className:"text-center p-6",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(A,{className:"w-16 h-16 text-gray-500 mx-auto mb-3 drop-shadow-sm"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-gray-500 rounded-full flex items-center justify-center",children:e.jsx($,{className:"w-3 h-3 text-white"})})]}),e.jsx("p",{className:"text-sm font-semibold text-gray-800 mb-1",children:"Document Preview"}),e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:D?"Image preview unavailable":"Document preview not available"}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs(r,{type:"button",variant:"outline",size:"sm",className:"text-gray-600 border-gray-300 hover:bg-gray-50",onClick:()=>M(!1),children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),"Close Preview"]}),g&&e.jsxs(r,{type:"button",variant:"default",size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white shadow-md",onClick:B,children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Open in New Tab"]})]})]})}),e.jsxs("div",{className:"absolute top-3 right-3 flex space-x-2",children:[c&&!I&&e.jsx(n,{variant:"secondary",className:"text-xs bg-green-100 text-green-700 border-green-300 shadow-sm",children:"Ready to Preview"}),o&&!c&&!I&&e.jsx(n,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-700 border-blue-300 shadow-sm",children:"Click to Preview"}),I&&e.jsx(n,{variant:"secondary",className:"text-xs bg-gray-100 text-gray-700 border-gray-300 shadow-sm",children:"Previewing"}),u&&h&&e.jsx(r,{type:"button",variant:"secondary",size:"sm",onClick:h,disabled:p,className:"h-6 w-6 p-0 bg-red-500 hover:bg-red-600 text-white border-red-500",children:e.jsx(R,{className:"w-3 h-3"})})]}),I&&f&&e.jsx("div",{className:"absolute inset-0 opacity-0 hover:opacity-100 transition-opacity duration-300 flex items-center justify-center bg-black bg-opacity-30",children:e.jsxs("div",{className:"flex space-x-2",children:[g&&e.jsxs(r,{type:"button",variant:"secondary",size:"sm",className:"bg-white/90 hover:bg-white shadow-md",onClick:B,children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Full Screen"]}),b&&e.jsxs(r,{type:"button",variant:"secondary",size:"sm",className:"bg-white/90 hover:bg-white shadow-md",onClick:F,children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Download"]})]})})]}),e.jsxs("div",{className:"p-4 space-y-3 bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:U()}),e.jsx(n,{variant:"secondary",className:l("text-xs",c?"bg-blue-100 text-blue-700 border-blue-300":"bg-green-100 text-green-700 border-green-300"),children:c?"Ready for upload":"Uploaded"})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[k&&!D?e.jsx(z,{className:"w-3 h-3"}):e.jsx(A,{className:"w-3 h-3"}),e.jsx("span",{children:k&&!D?"Image file":"Document file"})]}),c&&e.jsx("span",{children:(()=>{if(c){return`${(c.size/1024/1024).toFixed(1)} MB`}return""})()}),e.jsx("span",{className:"flex items-center space-x-1",children:e.jsxs("span",{children:["✓ ",c?"Ready to save":"Saved"]})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsxs("div",{className:"flex space-x-2",children:[!I&&e.jsxs(r,{type:"button",variant:"outline",size:"sm",onClick:()=>M(!0),className:"text-xs",children:[e.jsx(S,{className:"w-3 h-3 mr-1"}),"Preview"]}),I&&e.jsxs(r,{type:"button",variant:"outline",size:"sm",onClick:()=>M(!1),className:"text-xs",children:[e.jsx(R,{className:"w-3 h-3 mr-1"}),"Close"]}),g&&e.jsxs(r,{type:"button",variant:"outline",size:"sm",onClick:B,className:"text-xs",children:[e.jsx(S,{className:"w-3 h-3 mr-1"}),"View"]}),b&&e.jsxs(r,{type:"button",variant:"outline",size:"sm",onClick:F,className:"text-xs",children:[e.jsx(L,{className:"w-3 h-3 mr-1"}),"Download"]})]}),u&&h&&e.jsxs(r,{type:"button",variant:"outline",size:"sm",onClick:h,disabled:p,className:"text-xs text-red-600 hover:text-red-700 hover:bg-red-50",children:[e.jsx(R,{className:"w-3 h-3 mr-1"}),"Remove"]})]})]})]})}):null},J=()=>{const[t,l]=s.useState([]),[E,L]=s.useState(!0),[$,R]=s.useState(""),[P,z]=s.useState("ALL"),[J,G]=s.useState(0),[X,Z]=s.useState(null),[ee,se]=s.useState(!1),[te,ae]=s.useState(null),le=H(),ie=O(),{isAdmin:re}=c(),ne=re(),{canCreate:ce,canEdit:oe,canDelete:de,isModuleAccessEnabled:me}=o(),xe=ce("employees"),he=oe("employees")&&ne,ue=de("employees")&&ne;s.useEffect(()=>{pe()},[$,P]);const pe=async()=>{try{L(!0);const e=[];$&&e.push({name:"first_name",op:"StringContains",value:$}),P&&"ALL"!==P&&e.push({name:"station",op:"Equal",value:P});const{data:s,error:t}=await window.ezsite.apis.tablePage("11727",{PageNo:1,PageSize:1e4,OrderByField:"ID",IsAsc:!0,Filters:e});if(t)throw t;const a=(s?.List||[]).sort((e,s)=>{const t=e=>{switch(e){case"Ongoing":default:return 1;case"Left":return 2;case"Terminated":return 3}},a=e.employment_status||"Ongoing",l=s.employment_status||"Ongoing",i=t(a),r=t(l);if(i!==r)return i-r;const n=e.station||"",c=s.station||"";if(n!==c)return n.localeCompare(c);const o=`${e.first_name} ${e.last_name}`,d=`${s.first_name} ${s.last_name}`;return o.localeCompare(d)});l(a),G(s?.VirtualCount||0)}catch(e){console.error("Error loading employees:",e),d({title:"Error",description:"Failed to load employees",variant:"destructive"})}finally{L(!1)}},je=e=>{ae(e),Z(e.ID),se(!0)},ye=e=>{if(ne)if(he)try{const s=t.find(s=>s.ID===e);if(!s)return d({title:"Error",description:"Employee not found. Please refresh the list and try again.",variant:"destructive"}),void pe();le(`/employees/${e}/edit`),console.log("Navigating to edit employee:",e,s)}catch(s){console.error("Error navigating to edit form:",s),d({title:"Navigation Error",description:"Failed to open edit form. Please try again.",variant:"destructive"})}else d({title:"Access Denied",description:"You don't have permission to edit employees.",variant:"destructive"});else d({title:"Admin Access Required",description:"Only administrators can edit employee records.",variant:"destructive"})},be=async e=>{if(ne)if(ue){if(confirm("Are you sure you want to delete this employee?"))try{const{error:s}=await window.ezsite.apis.tableDelete("11727",{ID:e});if(s)throw s;d({title:"Success",description:"Employee deleted successfully"}),pe(),se(!1)}catch(s){console.error("Error deleting employee:",s),d({title:"Error",description:"Failed to delete employee",variant:"destructive"})}}else d({title:"Access Denied",description:"You don't have permission to delete employees.",variant:"destructive"});else d({title:"Admin Access Required",description:"Only administrators can delete employee records.",variant:"destructive"})},ge=()=>{if(!te)return;const e=["Field,Value",`Employee ID,${te.employee_id}`,`Name,${te.first_name} ${te.last_name}`,`Email,${te.email}`,`Phone,${te.phone}`,`Position,${te.position}`,`Station,${te.station}`,`Shift,${te.shift}`,`Hire Date,${te.hire_date}`,`Salary,${te.salary}`,`Employment Status,${te.employment_status}`,"Status,"+(te.is_active?"Active":"Inactive")].join("\n"),s=new Blob([e],{type:"text/csv"}),t=window.URL.createObjectURL(s),a=document.createElement("a");a.href=t,a.download=`employee_${te.employee_id}_details.csv`,a.click(),window.URL.revokeObjectURL(t),d({title:"Success",description:"Employee details exported successfully"})},ve=()=>{xe?le("/employees/new"):d({title:"Access Denied",description:"You don't have permission to create employees.",variant:"destructive"})};C(X,e=>{const s=t.find(s=>s.ID===e);s&&je(s)},ye,be,ve);const fe=e=>{switch(e.toUpperCase()){case"MOBIL":return"bg-blue-500";case"AMOCO ROSEDALE":return"bg-green-500";case"AMOCO BROOKLYN":return"bg-purple-500";default:return"bg-gray-500"}},Ne=e=>{switch(e){case"Ongoing":return"bg-green-500";case"Terminated":return"bg-red-500";case"Left":return"bg-orange-500";default:return"bg-gray-500"}},we=({shift:s})=>{switch(s){case"Day":return e.jsx(n,{className:"bg-white text-black border border-gray-300 hover:bg-gray-50",children:s});case"Night":return e.jsx(n,{className:"bg-black text-white hover:bg-gray-800",children:s});case"Day & Night":return e.jsxs("div",{className:"relative inline-flex rounded-md overflow-hidden border border-gray-300",children:[e.jsx("div",{className:"bg-white text-black px-2 py-1 text-xs font-medium border-r border-gray-300",children:"Day"}),e.jsx("div",{className:"bg-black text-white px-2 py-1 text-xs font-medium",children:"Night"})]});default:return e.jsx(n,{className:"bg-gray-100 text-gray-700",children:s||"N/A"})}},_e=({employee:s})=>{const t=[{fileId:s.id_document_file_id,label:"ID Document 1"},{fileId:s.id_document_2_file_id,label:"ID Document 2"},{fileId:s.id_document_3_file_id,label:"ID Document 3"},{fileId:s.id_document_4_file_id,label:"ID Document 4"}].filter(e=>e.fileId);return 0===t.length?e.jsxs("div",{className:"text-center py-6 text-gray-500",children:[e.jsx(A,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),e.jsx("p",{className:"text-sm font-medium",children:"No ID documents uploaded"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"ID documents will appear here once uploaded"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{className:"w-4 h-4 text-gray-600"}),e.jsxs("span",{className:"font-medium text-gray-800",children:["ID Documents (",t.length,")"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{variant:"outline",className:"text-xs",children:"Always visible"}),ne&&e.jsx(n,{variant:"secondary",className:"text-xs bg-green-100 text-green-700",children:"Admin: Download enabled"})]})]}),s.id_document_type&&e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Document Type:"})," ",s.id_document_type]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:t.map((s,t)=>e.jsxs("div",{className:"relative",children:[e.jsx(W,{fileId:s.fileId,fileName:s.label,documentName:s.label,size:"lg",aspectRatio:"landscape",showRemoveButton:!1,showDownload:ne,showFullscreen:!0,showInstantPreview:!0,className:"border border-gray-200 shadow-sm hover:shadow-md transition-shadow rounded-lg overflow-hidden"}),e.jsx("div",{className:"absolute top-2 left-2 bg-black bg-opacity-60 text-white text-xs px-2 py-1 rounded",children:s.label}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(r,{variant:"secondary",size:"sm",className:"h-6 px-2 bg-white bg-opacity-90 hover:bg-opacity-100",onClick:()=>{},children:e.jsx(S,{className:"w-3 h-3"})})})]},t))}),e.jsxs("div",{className:"text-xs text-gray-500 bg-gray-50 p-3 rounded-lg",children:[e.jsx("p",{children:"• All ID documents are always visible like profile pictures"}),e.jsx("p",{children:"• Click on any document to view in full screen"}),ne?e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Admin:"})," Download buttons are visible for document management"]}):e.jsx("p",{children:"• Download access is restricted to administrators only"})]})]})},De=s=>[{key:"profile_picture",label:"Profile Picture",value:s.profile_image_id,type:"custom",customComponent:e.jsx("div",{className:"flex justify-center",children:e.jsx(I,{imageId:s.profile_image_id,firstName:s.first_name,lastName:s.last_name,size:"xl",className:"border-2 border-gray-200"})})},{key:"employee_id",label:"Employee ID",value:s.employee_id,type:"text",icon:V},{key:"name",label:"Full Name",value:`${s.first_name} ${s.last_name}`,type:"text",icon:V},{key:"email",label:"Email",value:s.email,type:"email"},{key:"phone",label:"Phone",value:K(s.phone),type:"phone"},{key:"position",label:"Position",value:s.position,type:"text"},{key:"station",label:"Station",value:s.station,type:"badge",badgeColor:fe(s.station)},{key:"shift",label:"Shift",value:s.shift,type:"custom",customComponent:e.jsx(we,{shift:s.shift})},{key:"employment_status",label:"Employment Status",value:s.employment_status,type:"badge",badgeColor:Ne(s.employment_status)},{key:"hire_date",label:"Hire Date",value:s.hire_date,type:"date"},{key:"date_of_birth",label:"Date of Birth",value:s.date_of_birth,type:"date"},{key:"current_address",label:"Current Address",value:s.current_address,type:"text"},{key:"mailing_address",label:"Mailing Address",value:s.mailing_address,type:"text"},{key:"reference_name",label:"Reference Name",value:s.reference_name,type:"text"},{key:"id_documents",label:"ID Documents",value:"id_documents",type:"custom",customComponent:e.jsx(_e,{employee:s})},{key:"salary",label:"Salary",value:s.salary,type:"currency"},{key:"is_active",label:"Active Status",value:s.is_active,type:"custom",customComponent:e.jsx(n,{className:"text-white "+(s.is_active?"bg-green-500 hover:bg-green-600":"bg-red-500 hover:bg-red-600"),children:s.is_active?"Active":"Inactive"})}];return ie?e.jsxs("div",{className:"space-y-4",children:[e.jsxs(a,{children:[e.jsx(m,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(x,{className:"flex items-center space-x-2 text-lg",children:[e.jsx(M,{className:"w-5 h-5"}),e.jsx("span",{children:"All Employees"})]}),e.jsxs(h,{className:"text-sm",children:["Displaying all ",J," employees"]})]}),xe&&e.jsx(r,{size:"sm",onClick:ve,children:e.jsx(B,{className:"w-4 h-4"})})]})}),e.jsxs(i,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(f,{value:P,onValueChange:z,children:[e.jsx(N,{children:e.jsx(w,{placeholder:"Select Station"})}),e.jsxs(_,{children:[e.jsx(D,{value:"ALL",children:"All Stations"}),e.jsx(D,{value:"MOBIL",children:"MOBIL"}),e.jsx(D,{value:"AMOCO ROSEDALE",children:"AMOCO ROSEDALE"}),e.jsx(D,{value:"AMOCO BROOKLYN",children:"AMOCO BROOKLYN"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(F,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(u,{placeholder:"Search employees...",value:$,onChange:e=>R(e.target.value),className:"pl-10"})]})]}),E?e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((s,t)=>e.jsx("div",{className:"h-20 bg-gray-100 rounded animate-pulse"},t))}):0===t.length?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(M,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No employees found"}),xe&&e.jsx(r,{variant:"outline",className:"mt-4",onClick:ve,children:"Add Your First Employee"})]}):e.jsx("div",{className:"space-y-3",children:t.map((s,t)=>e.jsx(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},children:e.jsx(a,{className:"cursor-pointer transition-colors "+(X===s.ID?"bg-blue-50 border-blue-200":"hover:bg-gray-50"),onClick:()=>Z(s.ID),children:e.jsx(i,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(I,{imageId:s.profile_image_id,firstName:s.first_name,lastName:s.last_name,size:"md"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"font-medium text-gray-900 truncate",children:[s.first_name," ",s.last_name]}),e.jsx(n,{className:`text-white text-xs ${Ne(s.employment_status||"Ongoing")}`,children:s.employment_status||"Ongoing"})]}),e.jsx("p",{className:"text-sm text-gray-500",children:s.position}),e.jsx("p",{className:"text-xs text-gray-400",children:s.employee_id}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{className:`text-white text-xs ${fe(s.station)}`,children:s.station}),e.jsx(we,{shift:s.shift})]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(r,{variant:"outline",size:"sm",onClick:e=>{e.stopPropagation(),je(s)},className:"p-1 h-6 w-6",children:e.jsx(S,{className:"w-3 h-3"})}),he&&e.jsx(r,{variant:"outline",size:"sm",onClick:e=>{e.stopPropagation(),ye(s.ID)},className:"p-1 h-6 w-6",children:e.jsx(U,{className:"w-3 h-3"})}),ue&&e.jsx(r,{variant:"outline",size:"sm",onClick:e=>{e.stopPropagation(),be(s.ID)},className:"p-1 h-6 w-6 text-red-600 hover:text-red-700",children:e.jsx(Y,{className:"w-3 h-3"})})]})]})]})]})})})},s.ID))})]})]}),te&&e.jsx(k,{isOpen:ee,onClose:()=>{se(!1),ae(null),Z(null)},title:`${te.first_name} ${te.last_name}`,subtitle:`Employee ID: ${te.employee_id} • ${te.position}`,data:te,fields:De(te),onEdit:()=>{se(!1),ye(te.ID)},onDelete:()=>be(te.ID),onExport:ge,canEdit:he,canDelete:ue,canExport:!0})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(a,{children:[e.jsx(m,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs(x,{className:"flex items-center space-x-2",children:[e.jsx(M,{className:"w-6 h-6"}),e.jsx("span",{children:"All Employees"})]}),e.jsxs(h,{children:["Displaying all ",J," employees across all stations (sorted by status: Ongoing → Left → Terminated, then by station)"]})]}),xe?e.jsxs(r,{onClick:ve,className:"flex items-center space-x-2",children:[e.jsx(B,{className:"w-4 h-4"}),e.jsx("span",{children:"Add Employee"})]}):me&&e.jsx(n,{variant:"secondary",className:"text-xs",children:"Create access disabled by admin"})]})}),e.jsxs(i,{children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[e.jsx("div",{className:"w-64",children:e.jsxs(f,{value:P,onValueChange:z,children:[e.jsx(N,{children:e.jsx(w,{placeholder:"Select Station"})}),e.jsxs(_,{children:[e.jsx(D,{value:"ALL",children:"Select Any Station"}),e.jsx(D,{value:"MOBIL",children:"MOBIL"}),e.jsx(D,{value:"AMOCO ROSEDALE",children:"AMOCO ROSEDALE"}),e.jsx(D,{value:"AMOCO BROOKLYN",children:"AMOCO BROOKLYN"})]})]})}),e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(F,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(u,{placeholder:"Search employees...",value:$,onChange:e=>R(e.target.value),className:"pl-10"})]})]}),E?e.jsx("div",{className:"space-y-4",children:[...Array(5)].map((s,t)=>e.jsx("div",{className:"h-16 bg-gray-100 rounded animate-pulse"},t))}):0===t.length?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(M,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No employees found"}),xe&&e.jsx(r,{variant:"outline",className:"mt-4",onClick:ve,children:"Add Your First Employee"})]}):e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs(p,{children:[e.jsx(j,{children:e.jsxs(y,{children:[e.jsx(b,{children:"Profile"}),e.jsx(b,{children:"Employee ID"}),e.jsx(b,{children:"Name"}),e.jsx(b,{children:"Contact"}),e.jsx(b,{children:"Position"}),e.jsx(b,{children:"Station"}),e.jsx(b,{children:"Shift"}),e.jsx(b,{children:"Employment Status"}),e.jsx(b,{children:"Hire Date"}),e.jsx(b,{children:"Status"}),e.jsx(b,{children:"Actions"})]})}),e.jsx(g,{children:t.map((s,t)=>{return e.jsxs(Q.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},className:"border-b hover:bg-gray-50 transition-colors cursor-pointer "+(X===s.ID?"bg-blue-50 border-blue-200":""),onClick:()=>Z(s.ID),children:[e.jsx(v,{children:e.jsx(I,{imageId:s.profile_image_id,firstName:s.first_name,lastName:s.last_name,size:"sm"})}),e.jsx(v,{className:"font-medium",children:s.employee_id}),e.jsx(v,{children:e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[s.first_name," ",s.last_name]}),e.jsx("p",{className:"text-sm text-gray-500",children:s.position})]})}),e.jsx(v,{children:e.jsxs("div",{className:"space-y-1",children:[s.email&&e.jsxs("div",{className:"flex items-center space-x-1 text-sm",children:[e.jsx(q,{className:"w-3 h-3"}),e.jsx("span",{children:s.email})]}),s.phone&&e.jsxs("div",{className:"flex items-center space-x-1 text-sm",children:[e.jsx(T,{className:"w-3 h-3"}),e.jsx("span",{children:K(s.phone)})]})]})}),e.jsx(v,{children:s.position}),e.jsx(v,{children:e.jsx(n,{className:`text-white ${fe(s.station)}`,children:s.station})}),e.jsx(v,{children:e.jsx(we,{shift:s.shift})}),e.jsx(v,{children:e.jsx(n,{className:`text-white ${Ne(s.employment_status||"Ongoing")}`,children:s.employment_status||"Ongoing"})}),e.jsx(v,{children:(a=s.hire_date,a?new Date(a).toLocaleDateString():"N/A")}),e.jsx(v,{children:e.jsx(n,{className:"text-white "+(s.is_active?"bg-green-500 hover:bg-green-600":"bg-red-500 hover:bg-red-600"),children:s.is_active?"Active":"Inactive"})}),e.jsx(v,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(r,{variant:"outline",size:"sm",onClick:e=>{e.stopPropagation(),je(s)},className:"text-blue-600 hover:text-blue-700",children:e.jsx(S,{className:"w-4 h-4"})}),he&&e.jsx(r,{variant:"outline",size:"sm",onClick:e=>{e.stopPropagation(),ye(s.ID)},children:e.jsx(U,{className:"w-4 h-4"})}),ue&&e.jsx(r,{variant:"outline",size:"sm",onClick:e=>{e.stopPropagation(),be(s.ID)},className:"text-red-600 hover:text-red-700",children:e.jsx(Y,{className:"w-4 h-4"})})]})})]},s.ID);var a})})]})}),(!ne||!he||!ue)&&e.jsx("div",{className:"mt-4 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-amber-700",children:[e.jsx("strong",{children:"Access Restrictions:"}),!ne&&" Edit & Delete access restricted to administrators only.",ne&&!he&&" Edit access disabled by module settings.",ne&&!ue&&" Delete access disabled by module settings."]})})]})]}),te&&e.jsx(k,{isOpen:ee,onClose:()=>{se(!1),ae(null),Z(null)},title:`${te.first_name} ${te.last_name}`,subtitle:`Employee ID: ${te.employee_id} • ${te.position}`,data:te,fields:De(te),onEdit:()=>{se(!1),ye(te.ID)},onDelete:()=>be(te.ID),onExport:ge,canEdit:he,canDelete:ue,canExport:!0})]})};export{J as default};
