import{j as e}from"./radix-ui-Crli8-Dx.js";import{r as s}from"./react-core-CKNU0hQt.js";import{u as i,n as a,B as l,p as n,q as r,r as t,s as c,C as d,L as o,I as h,f as x}from"./index-CNwujOOT.js";import{S as m}from"./switch-D1dWGluT.js";import{S as j,c as u,d as p,a as f,b as v}from"./select-Cf4csPfA.js";import{U as g,N,aw as y,S as Y}from"./utilities-BH0DC7Sl.js";import"./routing-DcURAnU1.js";import"./data-management-CVsxhheF.js";import"./animations-CAl9KjXG.js";const S=()=>{const{user:S,userProfile:b,isAdmin:C,isManager:w}=i(),{toast:D}=a(),[M,A]=s.useState(!1),[F,k]=s.useState({notifications:{emailAlerts:!0,smsAlerts:!1,desktopNotifications:!0,alertFrequency:"daily"},preferences:{theme:"light",language:"en",dateFormat:"MM/DD/YYYY",currency:"USD"},security:{sessionTimeout:30,requirePasswordChange:!1,twoFactorAuth:!1}}),[O,E]=s.useState({phone:b?.phone||"",station:b?.station||""});s.useEffect(()=>{b&&E({phone:b.phone||"",station:b.station||""})},[b]);const P=async()=>{try{A(!0),D({title:"Settings Saved",description:"Your preferences have been saved"})}catch(e){console.error("Error saving settings:",e),D({title:"Save Failed",description:"Failed to save settings",variant:"destructive"})}finally{A(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Application Settings"}),e.jsx("p",{className:"text-gray-600",children:"Manage your account and application preferences"})]}),e.jsx(l,{variant:"outline",children:b?.role})]}),e.jsxs(n,{defaultValue:"profile",className:"space-y-4",children:[e.jsxs(r,{className:"grid w-full lg:w-[400px] grid-cols-3",children:[e.jsx(t,{value:"profile",children:"Profile"}),e.jsx(t,{value:"notifications",children:"Notifications"}),e.jsx(t,{value:"preferences",children:"Preferences"})]}),e.jsx(c,{value:"profile",className:"space-y-4",children:e.jsxs(d,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[e.jsx(g,{className:"h-5 w-5"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Profile Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"name",children:"Name"}),e.jsx(h,{id:"name",value:S?.Name||"",disabled:!0,className:"bg-gray-50"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Contact admin to change name"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"email",children:"Email"}),e.jsx(h,{id:"email",value:S?.Email||"",disabled:!0,className:"bg-gray-50"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Contact admin to change email"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"phone",children:"Phone"}),e.jsx(h,{id:"phone",value:O.phone,onChange:e=>E({...O,phone:e.target.value}),placeholder:"Enter phone number"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"station",children:"Station"}),e.jsxs(j,{value:O.station,onValueChange:e=>E({...O,station:e}),children:[e.jsx(u,{children:e.jsx(p,{placeholder:"Select station"})}),e.jsxs(f,{children:[e.jsx(v,{value:"MOBIL",children:"MOBIL"}),e.jsx(v,{value:"AMOCO ROSEDALE",children:"AMOCO ROSEDALE"}),e.jsx(v,{value:"AMOCO BROOKLYN",children:"AMOCO BROOKLYN"}),e.jsx(v,{value:"ALL",children:"All Stations"})]})]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"role",children:"Role"}),e.jsx(h,{id:"role",value:b?.role||"",disabled:!0,className:"bg-gray-50"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Contact admin to change role"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"employee-id",children:"Employee ID"}),e.jsx(h,{id:"employee-id",value:b?.employee_id||"",disabled:!0,className:"bg-gray-50"})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsxs(x,{onClick:async()=>{if(b)try{A(!0);const{error:e}=await window.ezsite.apis.tableUpdate(11725,{id:b.id,phone:O.phone,station:O.station});if(e)throw new Error(e);D({title:"Profile Updated",description:"Your profile has been successfully updated"})}catch(e){console.error("Error updating profile:",e),D({title:"Update Failed",description:"Failed to update profile",variant:"destructive"})}finally{A(!1)}},disabled:M,children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Save Profile"]})})]})}),e.jsx(c,{value:"notifications",className:"space-y-4",children:e.jsxs(d,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[e.jsx(y,{className:"h-5 w-5"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Notification Settings"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Email Alerts"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Receive alerts via email"})]}),e.jsx(m,{checked:F.notifications.emailAlerts,onCheckedChange:e=>k({...F,notifications:{...F.notifications,emailAlerts:e}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(o,{children:"SMS Alerts"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Receive alerts via SMS"})]}),e.jsx(m,{checked:F.notifications.smsAlerts,onCheckedChange:e=>k({...F,notifications:{...F.notifications,smsAlerts:e}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Desktop Notifications"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Show browser notifications"})]}),e.jsx(m,{checked:F.notifications.desktopNotifications,onCheckedChange:e=>k({...F,notifications:{...F.notifications,desktopNotifications:e}})})]}),e.jsxs("div",{children:[e.jsx(o,{children:"Alert Frequency"}),e.jsxs(j,{value:F.notifications.alertFrequency,onValueChange:e=>k({...F,notifications:{...F.notifications,alertFrequency:e}}),children:[e.jsx(u,{className:"mt-2",children:e.jsx(p,{})}),e.jsxs(f,{children:[e.jsx(v,{value:"immediate",children:"Immediate"}),e.jsx(v,{value:"daily",children:"Daily Summary"}),e.jsx(v,{value:"weekly",children:"Weekly Summary"})]})]})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsxs(x,{onClick:P,disabled:M,children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Save Notifications"]})})]})}),e.jsx(c,{value:"preferences",className:"space-y-4",children:e.jsxs(d,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[e.jsx(Y,{className:"h-5 w-5"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Application Preferences"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Theme"}),e.jsxs(j,{value:F.preferences.theme,onValueChange:e=>k({...F,preferences:{...F.preferences,theme:e}}),children:[e.jsx(u,{className:"mt-2",children:e.jsx(p,{})}),e.jsxs(f,{children:[e.jsx(v,{value:"light",children:"Light"}),e.jsx(v,{value:"dark",children:"Dark"}),e.jsx(v,{value:"auto",children:"Auto"})]})]})]}),e.jsxs("div",{children:[e.jsx(o,{children:"Language"}),e.jsxs(j,{value:F.preferences.language,onValueChange:e=>k({...F,preferences:{...F.preferences,language:e}}),children:[e.jsx(u,{className:"mt-2",children:e.jsx(p,{})}),e.jsxs(f,{children:[e.jsx(v,{value:"en",children:"English"}),e.jsx(v,{value:"es",children:"Spanish"})]})]})]}),e.jsxs("div",{children:[e.jsx(o,{children:"Date Format"}),e.jsxs(j,{value:F.preferences.dateFormat,onValueChange:e=>k({...F,preferences:{...F.preferences,dateFormat:e}}),children:[e.jsx(u,{className:"mt-2",children:e.jsx(p,{})}),e.jsxs(f,{children:[e.jsx(v,{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),e.jsx(v,{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),e.jsx(v,{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]})]}),e.jsxs("div",{children:[e.jsx(o,{children:"Currency"}),e.jsxs(j,{value:F.preferences.currency,onValueChange:e=>k({...F,preferences:{...F.preferences,currency:e}}),children:[e.jsx(u,{className:"mt-2",children:e.jsx(p,{})}),e.jsxs(f,{children:[e.jsx(v,{value:"USD",children:"USD ($)"}),e.jsx(v,{value:"EUR",children:"EUR (€)"}),e.jsx(v,{value:"GBP",children:"GBP (£)"})]})]})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsxs(x,{onClick:P,disabled:M,children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Save Preferences"]})})]})})]})]})};export{S as default};
