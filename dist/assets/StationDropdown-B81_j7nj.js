import{j as s}from"./radix-ui-woSLwCdF.js";import{r as e}from"./react-core-CKNU0hQt.js";import{S as a,c as l,d as i,a as t,b as c}from"./select-KM6PLuaC.js";import{L as n,B as r}from"./index-mhPlV2HJ.js";import{a as d}from"./use-station-service-DwD_FQIf.js";import{z as x,y as o,aa as m}from"./utilities-BBdJI3Xi.js";const h=({value:h,onValueChange:j,placeholder:p="Select station",label:u,required:N=!1,disabled:f=!1,includeAll:g=!0,showBadge:v=!1,className:w="",id:b})=>{const{stationOptions:A,getStationColor:S,canSelectAll:y,getUserAccessibleStations:L,loading:F}=d(g),[T,$]=e.useState(0);e.useEffect(()=>{(async()=>{try{const s=await L();$(s.length)}catch(s){console.error("Error loading accessible stations count:",s),$(0)}})()},[L]);return F?s.jsxs("div",{className:`space-y-2 ${w}`,children:[u&&s.jsxs(n,{htmlFor:b,children:[u,N&&" *"]}),s.jsxs("div",{className:"flex items-center space-x-2 p-2 border rounded-md",children:[s.jsx(x,{className:"w-4 h-4 animate-spin"}),s.jsx("span",{className:"text-sm text-gray-500",children:"Loading stations..."})]})]}):s.jsxs("div",{className:`space-y-2 ${w}`,children:[u&&s.jsxs(n,{htmlFor:b,children:[u,N&&" *"]}),s.jsxs(a,{value:h,onValueChange:j,disabled:f,children:[s.jsx(l,{id:b,children:s.jsx(i,{placeholder:p,children:h?(e=>{if(!e)return null;if("ALL"===e)return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(o,{className:"w-4 h-4 text-indigo-600"}),s.jsx("span",{children:"All Stations"}),v&&s.jsxs(r,{className:"text-white bg-indigo-600",children:["All (",T,")"]})]});if("ALL_STATIONS"===e)return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(o,{className:"w-4 h-4 text-indigo-600"}),s.jsx("span",{children:"All Stations"}),v&&s.jsxs(r,{className:"text-white bg-indigo-600",children:["All (",T,")"]})]});const a=A.find(s=>s.value===e);return a&&v?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(m,{className:"w-4 h-4"}),s.jsx(r,{className:`text-white ${S(e)}`,children:a.label})]}):a?.label||e})(h):p})}),s.jsxs(t,{children:[A.map(e=>s.jsx(c,{value:e.value,children:s.jsx("div",{className:"flex items-center space-x-2 w-full",children:"ALL_STATIONS"===e.value?s.jsxs(s.Fragment,{children:[s.jsx(o,{className:"w-4 h-4 text-indigo-600"}),s.jsxs("div",{className:"flex items-center justify-between w-full",children:[s.jsx("span",{className:"font-medium text-indigo-700",children:e.label}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(r,{variant:"secondary",className:"text-xs",children:[T," stations"]}),s.jsx("span",{className:"text-xs text-gray-500",children:"(View All)"})]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx(m,{className:"w-4 h-4"}),v&&s.jsx("div",{className:`w-3 h-3 rounded-full ${e.color}`}),s.jsx("span",{children:e.label})]})})},e.value)),y&&g&&s.jsx("div",{className:"px-2 py-1 text-xs text-gray-500 border-t border-gray-100",children:s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(o,{className:"w-3 h-3"}),s.jsxs("span",{children:["You have access to ",T," station",1!==T?"s":""]})]})})]})]})]})};export{h as S};
