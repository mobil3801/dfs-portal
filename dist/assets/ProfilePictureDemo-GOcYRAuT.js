import{j as e}from"./radix-ui-woSLwCdF.js";import{r as s}from"./react-core-CKNU0hQt.js";import{u as a,l,e as i,T as r,q as t,r as c,s as n,C as d,f as o,g as m,B as x,k as p,h,S as j,L as u,I as N}from"./index-DyvxZZaK.js";import{P as f}from"./ProfilePicture-Cend4BjS.js";import{R as g,Z as v,aP as y,U as w,S as b,a4 as E,y as z,a1 as I,l as S,g as P}from"./utilities-DMEd7dY0.js";import"./routing-DcURAnU1.js";import"./data-management-r38r-ocq.js";import"./animations-CdlE0-Ca.js";import"./imageCompression-DvX-F3tO.js";const F=({size:i="md",className:r="",allowEdit:t=!0,showFallbackIcon:c=!0,enableHover:n=!1,rounded:d="full",disabled:o=!1})=>{const{user:m,userProfile:x,isAuthenticated:p,refreshUserData:h}=a(),[j,u]=s.useState(null),[N,g]=s.useState(!1),{toast:v}=l();s.useEffect(()=>{p&&m&&x&&y()},[p,m,x]);const y=async()=>{if(m&&x)try{if(g(!0),x.profile_image_id)return void u(x.profile_image_id);if(x.id){const{data:e,error:s}=await window.ezsite.apis.tablePage("11725",{PageNo:1,PageSize:1,Filters:[{name:"ID",op:"Equal",value:x.id}]});if(s)return void console.error("Error loading user profile:",s);if(e&&e.List&&e.List.length>0){const s=e.List[0];u(s.profile_image_id||null)}}}catch(e){console.error("Error loading user profile:",e)}finally{g(!1)}},{firstName:w,lastName:b}=(()=>{if(!m)return{firstName:"",lastName:""};const e=m.Name?.split(" ")||[];return{firstName:e[0]||"",lastName:e.slice(1).join(" ")||""}})();return p&&m?e.jsx(f,{imageId:j,firstName:w,lastName:b,size:i,className:r,showFallbackIcon:c,enableHover:n,rounded:d,allowEdit:t,disabled:o||N,onImageUpdate:async e=>{if(m&&x)try{u(e),await h(),v({title:"Profile Updated",description:"Your profile picture has been updated successfully"})}catch(s){console.error("Error updating profile:",s),v({title:"Update Failed",description:"Failed to update your profile picture",variant:"destructive"})}},userId:m.ID,tableName:"user_profiles",recordId:x?.id,alt:`${w} ${b}`.trim()||m.Name||"User profile picture"}):e.jsx(f,{size:i,className:r,showFallbackIcon:c,enableHover:n,rounded:d,disabled:!0,allowEdit:!1})},U=({employeeId:a,size:i="md",className:r="",allowEdit:t=!0,showFallbackIcon:c=!0,enableHover:n=!1,rounded:d="full",disabled:o=!1,onImageUpdate:m})=>{const[x,p]=s.useState(null),[h,j]=s.useState(!1),{toast:u}=l();s.useEffect(()=>{a&&N()},[a]);const N=async()=>{try{j(!0);const{data:e,error:s}=await window.ezsite.apis.tablePage("11727",{PageNo:1,PageSize:1,Filters:[{name:"ID",op:"Equal",value:a}]});if(s)return console.error("Error loading employee:",s),void u({title:"Error",description:"Failed to load employee data",variant:"destructive"});e&&e.List&&e.List.length>0&&p(e.List[0])}catch(e){console.error("Error loading employee:",e),u({title:"Error",description:"Failed to load employee data",variant:"destructive"})}finally{j(!1)}};return x?e.jsx(f,{imageId:x.profile_image_id,firstName:x.first_name,lastName:x.last_name,size:i,className:r,showFallbackIcon:c,enableHover:n,rounded:d,allowEdit:t,disabled:o||h,onImageUpdate:async e=>{try{p(s=>({...s,profile_image_id:e})),await N(),m&&m(e),u({title:"Profile Updated",description:"Employee profile picture has been updated successfully"})}catch(s){console.error("Error updating employee profile:",s),u({title:"Update Failed",description:"Failed to update employee profile picture",variant:"destructive"})}},employeeId:a,tableName:"employees",recordId:a,alt:`${x.first_name} ${x.last_name}`.trim()||"Employee profile picture"}):e.jsx(f,{size:i,className:r,showFallbackIcon:c,enableHover:n,rounded:d,disabled:!0,allowEdit:!1,showLoadingState:h})},_=()=>{const[_,D]=s.useState(null),[L,H]=s.useState(null),[C,$]=s.useState("John"),[k,V]=s.useState("Doe"),[R,A]=s.useState([]),[T,q]=s.useState(!1),{toast:O}=l(),{user:B,userProfile:G,isAuthenticated:J}=a();s.useEffect(()=>{M()},[]);const M=async()=>{try{q(!0);const e=await window.ezsite.apis.tablePage("11727",{PageNo:1,PageSize:10,OrderByField:"first_name",IsAsc:!0,Filters:[]});e.error?console.error("Error loading employees:",e.error):A(e.data?.List||[])}catch(e){console.error("Error loading employees:",e)}finally{q(!1)}},W=[{title:"With Image",props:{imageId:L,firstName:C,lastName:k,allowEdit:!0},description:"Shows uploaded profile picture with edit functionality"},{title:"With Preview",props:{previewFile:_,firstName:C,lastName:k,allowEdit:!0},description:"Shows file preview before upload"},{title:"Initials Only",props:{firstName:C,lastName:k,allowEdit:!0},description:"Shows initials when no image"},{title:"Default Icon",props:{firstName:"",lastName:"",allowEdit:!0},description:"Shows default user icon"},{title:"Read Only",props:{firstName:C,lastName:k,allowEdit:!1},description:"Display-only mode without edit functionality"},{title:"Error State",props:{imageId:99999,firstName:C,lastName:k,allowEdit:!0},description:"Shows error state for invalid image"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Enhanced Profile Picture Demo"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Demonstration of the enhanced ProfilePicture component with editing capabilities"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(i,{onClick:()=>{D(null),H(null),$("John"),V("Doe"),O({title:"Demo Reset",description:"All demo data has been cleared"})},variant:"outline",size:"sm",className:"flex items-center space-x-2",children:[e.jsx(g,{className:"w-4 h-4"}),e.jsx("span",{children:"Reset Demo"})]})})]}),e.jsxs(r,{defaultValue:"showcase",className:"w-full",children:[e.jsxs(t,{className:"grid w-full grid-cols-5",children:[e.jsx(c,{value:"showcase",children:"Showcase"}),e.jsx(c,{value:"user-profile",children:"User Profile"}),e.jsx(c,{value:"upload",children:"Upload Test"}),e.jsx(c,{value:"employees",children:"Employee Gallery"}),e.jsx(c,{value:"variations",children:"Variations"})]}),e.jsx(n,{value:"showcase",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:W.map((s,a)=>e.jsxs(d,{className:"border-2",children:[e.jsxs(o,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(m,{className:"text-lg",children:s.title}),e.jsx(x,{variant:"secondary",children:s.title.toLowerCase().replace(" ","-")})]}),e.jsx(p,{children:s.description})]}),e.jsxs(h,{className:"flex flex-col items-center space-y-4",children:[e.jsx(f,{...s.props,size:"xl",enableHover:!0,className:"ring-2 ring-blue-100"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:s.props.firstName||s.props.lastName?`${s.props.firstName} ${s.props.lastName}`.trim():"No Name"}),s.props.allowEdit&&e.jsxs(x,{variant:"outline",className:"mt-1",children:[e.jsx(v,{className:"w-3 h-3 mr-1"}),"Editable"]})]})]})]},a))})}),e.jsx(n,{value:"user-profile",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsxs(m,{className:"flex items-center space-x-2",children:[e.jsx(y,{className:"w-5 h-5"}),e.jsx("span",{children:"Current User Profile"})]}),e.jsx(p,{children:"Your profile picture with full editing capabilities"})]}),e.jsx(h,{className:"space-y-4",children:J?e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx(F,{size:"2xl",allowEdit:!0,enableHover:!0,className:"ring-4 ring-blue-100"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium",children:B?.Name||"Current User"}),e.jsx("p",{className:"text-sm text-gray-500",children:B?.Email}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Role: ",G?.role||"Employee"]})]}),e.jsxs(x,{variant:"default",children:[e.jsx(v,{className:"w-3 h-3 mr-1"}),"Click to edit your profile picture"]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(w,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Please log in to view your profile"})]})})]}),e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsxs(m,{className:"flex items-center space-x-2",children:[e.jsx(b,{className:"w-5 h-5"}),e.jsx("span",{children:"Profile Settings"})]}),e.jsx(p,{children:"Different display options for your profile picture"})]}),e.jsx(h,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Size Variations"}),e.jsx("div",{className:"flex items-center justify-center space-x-4",children:["sm","md","lg","xl"].map(s=>e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx(F,{size:s,allowEdit:!1,enableHover:!0,className:"ring-2 ring-gray-100"}),e.jsx("p",{className:"text-xs text-gray-500",children:s})]},s))})]}),e.jsx(j,{}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Shape Variations"}),e.jsx("div",{className:"flex items-center justify-center space-x-4",children:["full","xl","lg","md"].map(s=>e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx(F,{size:"lg",rounded:s,allowEdit:!1,enableHover:!0,className:"ring-2 ring-gray-100"}),e.jsx("p",{className:"text-xs text-gray-500",children:"full"===s?"circular":`rounded-${s}`})]},s))})]})]})})]})]})}),e.jsx(n,{value:"upload",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsxs(m,{className:"flex items-center space-x-2",children:[e.jsx(E,{className:"w-5 h-5"}),e.jsx("span",{children:"Manual Upload Test"})]}),e.jsx(p,{children:"Test the profile picture upload functionality manually"})]}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"firstName",children:"First Name"}),e.jsx(N,{id:"firstName",value:C,onChange:e=>$(e.target.value),placeholder:"Enter first name"})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"lastName",children:"Last Name"}),e.jsx(N,{id:"lastName",value:k,onChange:e=>V(e.target.value),placeholder:"Enter last name"})]})]}),e.jsx(j,{}),e.jsx("div",{className:"flex justify-center",children:e.jsx(f,{imageId:L,firstName:C,lastName:k,previewFile:_,size:"2xl",allowEdit:!0,enableHover:!0,className:"ring-4 ring-blue-100",onImageUpdate:e=>{H(e),O({title:"Demo Updated",description:"Demo profile picture updated"})}})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:C||k?`${C} ${k}`.trim():"No Name"}),e.jsxs(x,{variant:"outline",children:[e.jsx(v,{className:"w-3 h-3 mr-1"}),"Click avatar to edit"]})]})]})]}),e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsxs(m,{className:"flex items-center space-x-2",children:[e.jsx(z,{className:"w-5 h-5"}),e.jsx("span",{children:"Live Preview"})]}),e.jsx(p,{children:"See how the component looks with different states"})]}),e.jsx(h,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Current State"}),e.jsx(f,{imageId:L,firstName:C,lastName:k,previewFile:_,size:"2xl",allowEdit:!1,enableHover:!0,className:"ring-4 ring-blue-100"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:C||k?`${C} ${k}`.trim():"No Name"})]}),e.jsx(j,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Current Status:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[L&&e.jsxs(x,{variant:"default",children:[e.jsx(I,{className:"w-3 h-3 mr-1"}),"Uploaded Image"]}),_&&e.jsxs(x,{variant:"secondary",children:[e.jsx(z,{className:"w-3 h-3 mr-1"}),"Preview File"]}),!L&&!_&&e.jsxs(x,{variant:"outline",children:[e.jsx(w,{className:"w-3 h-3 mr-1"}),"No Image"]})]})]})]})})]})]})}),e.jsx(n,{value:"employees",children:e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsxs(m,{className:"flex items-center space-x-2",children:[e.jsx(S,{className:"w-5 h-5"}),e.jsx("span",{children:"Employee Gallery"})]}),e.jsx(p,{children:"View existing employee profile pictures from the database"})]}),e.jsx(h,{children:T?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(g,{className:"w-6 h-6 animate-spin mr-2"}),e.jsx("span",{children:"Loading employees..."})]}):R.length>0?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:R.map(s=>e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx(U,{employeeId:s.id,size:"lg",allowEdit:!0,enableHover:!0,className:"ring-2 ring-gray-100 hover:ring-blue-200"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium",children:[s.first_name," ",s.last_name]}),e.jsx("p",{className:"text-xs text-gray-500",children:s.position||"Employee"}),e.jsx("p",{className:"text-xs text-gray-400",children:s.station}),e.jsxs(x,{variant:"outline",className:"mt-1",children:[e.jsx(v,{className:"w-3 h-3 mr-1"}),"Editable"]})]})]},s.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(S,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No employees found"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Add employees to see their profile pictures here"})]})})]})}),e.jsx(n,{value:"variations",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsxs(m,{className:"flex items-center space-x-2",children:[e.jsx(b,{className:"w-5 h-5"}),e.jsx("span",{children:"Size Variations"})]}),e.jsx(p,{children:"Different sizes available for the ProfilePicture component"})]}),e.jsx(h,{children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6",children:[{size:"sm",label:"Small (32px)"},{size:"md",label:"Medium (40px)"},{size:"lg",label:"Large (64px)"},{size:"xl",label:"Extra Large (96px)"},{size:"2xl",label:"2X Large (128px)"}].map(s=>e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx(f,{imageId:L,firstName:C,lastName:k,previewFile:_,size:s.size,allowEdit:!0,enableHover:!0,className:"ring-2 ring-blue-100"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:s.label}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Size: ",s.size]})]})]},s.size))})})]}),e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsxs(m,{className:"flex items-center space-x-2",children:[e.jsx(P,{className:"w-5 h-5"}),e.jsx("span",{children:"Shape Variations"})]}),e.jsx(p,{children:"Different border radius options for the ProfilePicture component"})]}),e.jsx(h,{children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6",children:["full","xl","lg","md"].map(s=>e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx(f,{imageId:L,firstName:C,lastName:k,previewFile:_,size:"xl",rounded:s,allowEdit:!0,enableHover:!0,className:"ring-2 ring-blue-100"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"full"===s?"Circular":`Rounded ${s}`}),e.jsxs("p",{className:"text-xs text-gray-500",children:["rounded-",s]})]})]},s))})})]})]})})]})]})};export{_ as default};
