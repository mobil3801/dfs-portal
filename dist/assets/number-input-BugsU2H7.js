import{j as e}from"./radix-ui-woSLwCdF.js";import{r as a}from"./react-core-CKNU0hQt.js";import{i as t}from"./index-MtEqlP9w.js";const r=a.forwardRef(({className:r,type:n="number",value:l,onChange:s,onValueChange:o,allowNegative:u=!1,precision:i=2,...d},c)=>{const f=((e=0)=>{const[t,r]=a.useState(()=>"number"==typeof e?0===e?"0":String(e):String(e||0)),[n,l]=a.useState(!1),[s,o]=a.useState(!1),u=a.useCallback(()=>{l(!0),"0"!==t||s||r("")},[t,s]),i=a.useCallback(()=>{if(l(!1),t.trim()&&"-"!==t&&"."!==t){const e=parseFloat(t);isNaN(e)?(r("0"),o(!1)):(r(t),o(!0))}else r("0"),o(!1)},[t]),d=a.useCallback(e=>{r(e),o(!0)},[]),c=a.useCallback(()=>{const e=parseFloat(t);return isNaN(e)?0:e},[t]),f=a.useCallback((e=0)=>{let a;a="number"==typeof e?0===e?"0":String(e):String(e||0),r(a),o(0!==e&&"0"!==e)},[]);return{value:t,isFocused:n,handleFocus:u,handleBlur:i,handleChange:d,getNumericValue:c,resetValue:f,displayValue:n&&""===t?"":t}})(l);a.useEffect(()=>{void 0!==l&&l!==f.getNumericValue()&&f.resetValue(l)},[l]);return e.jsx("input",{type:n,className:t("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:c,value:f.displayValue,onChange:e=>{const a=e.target.value;if(""===a)return f.handleChange(a),s&&s(0),void(o&&o(a));if(u&&"-"===a)return f.handleChange(a),void(o&&o(a));const t=parseFloat(a);if(isNaN(t)){(u?/^-?\d*\.?\d*$/:/^\d*\.?\d*$/).test(a)&&(f.handleChange(a),o&&o(a))}else{if(!u&&t<0)return;const e=void 0!==i?Math.round(t*Math.pow(10,i))/Math.pow(10,i):t;f.handleChange(a),s&&s(e),o&&o(a)}},onKeyDown:e=>{[8,9,27,13,46,37,39,38,40].includes(e.keyCode)||u&&"-"===e.key&&0===e.currentTarget.selectionStart||("."!==e.key||e.currentTarget.value.includes("."))&&(e.key>="0"&&e.key<="9"||e.preventDefault())},onFocus:f.handleFocus,onBlur:f.handleBlur,...d})});r.displayName="NumberInput";export{r as N};
